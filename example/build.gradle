/*
 * Copyright (c) 2021. AppDynamics LLC and its affiliates.
 * All rights reserved.
 *
 */

/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.0.2/samples
 */

apply from: "integration_test/tests.gradle"

def execPath = "$System.env.PATH" + System.getProperty("path.separator") + "$projectDir/../flutter/bin"

task buildiOS(type: Exec) {
    environment "PATH", execPath
    commandLine "../scripts/flutter-build-ios.sh"
}

task buildAndroid(type: Exec) {
    environment "PATH", execPath
    commandLine "../scripts/flutter-build-android.sh"
}

task runIntegrationTestsiOS {
    dependsOn runStartIntegrationTestiOS
    dependsOn runRequestTrackerIntegrationTestiOS
    dependsOn runCustomTimersIntegrationTestiOS
    dependsOn runBreadcrumbsIntegrationTestiOS
    dependsOn runErrorReportingIntegrationTestiOS
}

task runIntegrationTestsAndroid {
    dependsOn runStartIntegrationTestAndroid
    dependsOn runRequestTrackerIntegrationTestAndroid
    dependsOn runCustomTimersIntegrationTestAndroid
    dependsOn runBreadcrumbsIntegrationTestAndroid
    dependsOn runErrorReportingIntegrationTestAndroid

}

task installPods(type: Exec) {
     commandLine "../scripts/flutter-install-pods.sh"
}